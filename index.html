<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TG Camera Stream</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        body { background: #000; color: white; display: flex; flex-direction: column; align-items: center; margin: 0; font-family: sans-serif; }
        video { width: 100%; max-width: 500px; border-radius: 0 0 20px 20px; background: #222; }
        .controls { padding: 20px; text-align: center; }
        button { padding: 15px 30px; font-size: 18px; border-radius: 10px; border: none; background: #0088cc; color: white; cursor: pointer; }
    </style>
</head>
<body>
    <video id="webcam" autoplay playsinline muted></video>
    <div class="controls">
        <h3 id="status">Камера готова</h3>
        <button id="broadcastBtn">ТРАНСЛИРОВАТЬ</button>
    </div>

    <script>
        const video = document.getElementById('webcam');
        const btn = document.getElementById('broadcastBtn');
        const status = document.getElementById('status');

        // Запрашиваем камеру
        navigator.mediaDevices.getUserMedia({ video: { facingMode: "user" }, audio: false })
            .then(stream => {
                video.srcObject = stream;
            })
            .catch(err => {
                status.innerText = "Ошибка камеры: " + err;
            });

        btn.onclick = () => {
            status.innerText = "Подключение к ПК...";
            status.style.color = "#00ff00";
            // Тут мы добавим логику отправки видео в следующем шаге
        };
    </script>
</body>
</html>
